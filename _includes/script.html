<script type="text/javascript">
    (function(){
            const sideMenu = document.querySelector('#sideMenu');
            const toggleSideMenuButtons = document.querySelectorAll('.toggle-side-menu');
            const main = document.querySelector('#main');

            function toggleSideMenu() {
                let state;

                sideMenu.classList.toggle('is-in');
                main.classList.toggle('ml-0');
                main.classList.toggle('unit-12');

                if (sessionStorage.getItem('sideMenuState')) {
                    state = JSON.parse(sessionStorage.getItem('sideMenuState'));
                }
                else {
                    state = {};
                    state.isIn = false;
                    state.parentTabsOpen = [];
                    state.currentPage = '';
                }

                if (sideMenu.classList.contains('is-in'))
                    state.isIn = true;
                else
                    state.isIn = false;

               sessionStorage.setItem('sideMenuState', JSON.stringify(state));
            }

            function setActiveTabs() {
                const parent = document.querySelector('input[name="parent"]');
                const child = document.querySelector('input[name="child"]');
                const tabLinks = sideMenu.querySelectorAll('.tab-a');
                let isParentSet = false;

                for (let index = 0; index < tabLinks.length; index++) {
                    if (parent && tabLinks[index].innerText.toLowerCase() === parent.value && !isParentSet) {
                        tabLinks[index].parentElement.classList.add('is-active');
                        tabLinks[index].nextElementSibling.classList.remove('absent');
                        isParentSet = true;
                    }
                    else if (child && tabLinks[index].innerText.toLowerCase() === child.value) {
                        tabLinks[index].parentElement.classList.add('is-active');
                    }
                }
            }

            function initializePage() {
                if (sessionStorage.getItem('sideMenuState')) {
                    let state = JSON.parse(sessionStorage.getItem('sideMenuState'));

                    if (!state.isIn)
                        toggleSideMenu();
                }

                setActiveTabs();
            }

            toggleSideMenuButtons.forEach(function(element){
                element.addEventListener('click', toggleSideMenu);
            });

            sideMenu.addEventListener('click', function(e){
                const target = e.target;
                const sibling = target.nextElementSibling;

                if (e.target.classList.contains('tab-a') && sibling) {
                    e.preventDefault();
                    sibling.classList.toggle('absent');
                }
            });

            initializePage();
    })();
</script>